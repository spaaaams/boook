# 6.9 데이터 타입의 필요성

## 6.9.1 데이터 타입에 의한 메모리 공간의 확보와 참조

- 값은 메모리에 **저장**하고 **참조**할 수 있어야 한다.
- 메모리에 값을 저장하려면 먼저 확보해야할 **메모리의 크기를 결정**해야한다.
- 몇 바이트의 메모리 공간을 사용해야 낭비와 손실 없이 값을 저장할 수 있는지 알아야 한다.

### 예시

```javascript
var score = 100;
```

1. 위 코드가 실행되면 숫자 값 100을 저장하기 위해 메모리 공간을 확보
2. 확보된 메모리에 숫자 값 100을 **2진수**로 저장

- 자바스크립트 엔진은 데이터 타입, 즉 값의 종류에 따라 정해진 크기의 메모리 공간을 확보한다.
- 변수에 할당되는 값의 데이터 타입에 따라 확보해야 할 메모리 공간의 크기가 결정된다.
<center>

![](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdZ6pi2%2FbtrnxkBzW6g%2FbKX39ZcjDBmviYRelfqkFK%2Fimg.png)

</center>
위 예제의 경우

1. 자바스크립트 엔진은 리터럴 100을 숫자 타입의 값으로 해석
2. 숫자 타입의 값 100을 저장하기 위해 8바이트의 메모리 공간을 확보
3. 100을 2진수로 저장

자바스크립트는 숫자 타입의 값을 생성할 때 \*배정밀도 64비트 부동소수점 형식을 사용한다.

따라서 실제로 메모리에 저장되는 2진수 값은 위 그림과 다르다.

> **배정밀도 64비트 부동소수점**
>
> 모든 수를 실수로 처리함</br>
> 정수만 표현하기 위한 데이터 타입이 별도로 존재하지 않음

```javascript
console.log(0.1 + 0.2 == 0.3); // false
```

### 값을 참조하는 경우

식별자 `score`를 통해 숫자 타입의 값 100이 저장되어 있는 메모리 공간의 주소를 찾아갈 수 있다.

정확히 말하면 숫자 값 100이 저장되어 있는 메모리 공간의 선두 메모리 셀의 주소를 찾아갈 수 있다.

이때 값을 참조하려면 한 번에 읽어 들여야 할 메모리 셀의 개수(바이트 수)를 알아야 한다.

`score` 변수의 경우, 저장되어 잇는 값이 숫자 타입이므로 8바이트 단위로 읽어 들이지 않으면 값이 훼손 된다.

## 6.9.2 데이터 타입에 의한 값의 해석

메모리에서 읽어 들인 2진수를 어떻게 해석해야 하는가?

- 모든 값은 데이터 타입을 가진다.
- 메모리에 2진수, 즉 비트의 나열로 저장된다.
- 메모리에 저장된 값은 데이터 타입에 따라 다르게 해석될 수 있다.
- 예시) 0100 001을 숫자로 해석하면 65지만 문자열로 해석하면 'A'다.

### 정리

- 데이터 타입은 값의 종류를 말한다.
- 자바스크립트의 모든 값은 데이터 타입을 갖는다.

데이터 타입이 필요한 이유는 아래와 같다.

- 값을 저장할 때 확보하는 **메모리 공간의 크기를 결정**하기 위해
- 값을 참조할 때 한 번에 읽어 들여야 할 **메모리 공간의 크기**를 결정하기 위해
- 메모리에서 읽어 들인 **2진수를 어떻게 해석**할지 결정하기 위해

# 6.10 동적 타이핑

## 6.10.1 동적 타입 언어와 정적 타입 언어

자바스크립트의 모든 값은 데이터 타입을 갖는다.

그렇다면 변수는 데이터 타입을 가질까?

> C나 자바 같은 정적 타입 언어는 변수를 선언할 때 변수에 할당할 수 있는 값의 종류, 즉 데이터타입을 사전에 선언해야 한다.</br>
> 이를 **명시적 타입 선언**이라 한다.

```c
// c 변수에는 1바이트 정수 타입의 값(-128 ~ 127)만 할당할 수 있다.
char c;

// num 변수에는 4바이트 정수 타입의 값(-2,124,483,648 ~ 2,124,483,647)만 할당할 수 있다.
int num;
```

- 정적 타입 언어는 타입을 변경할 수 없다.
- 변수에 선언한 타입에 맞는 값만 할당할 수 있다.
- 정적 타입 언어는 컴파일 시점에 **타입 체크**(선언한 데이터 타입에 맞는 값을 할당했는지 검사하는 처리)를 수행한다.
- 타입 체크를 통과하지 못하면 에러를 발생시키고 프로그램의 실행 자체를 막는다.

이를 통해 런타임에 발생하는 에러를 줄인다.

자바스크립트는 정적 타입 언어와 다르게 변수를 선언할 때 타입을 선언하지 않는다.

단지 `var`, `let`, `const` 키워드를 사용해 변수를 선언할 뿐이다.

어떠한 데이터 타입의 값이라도 자유롭게 할당이 가능하다.

```javascript
var foo;

console.log(typeof foo); // undefined

foo = 3;
console.log(typeof foo); // number

foo = 'Hello';
console.log(typeof foo); // string

foo = true;
console.log(typeof foo); // boolean

foo = null;
console.log(typeof foo); // object

foo = Symbol();
console.log(typeof foo); // symbol

foo = {};
console.log(typeof foo); // object

foo = [];
console.log(typeof foo); // object

foo = function () {};
console.log(typeof foo); // function
```

- 자바스크립트의 변수는 선언이 아닌 할당에 의해 타입이 결정(타입 추론)된다.
- 재할당에 의해 변수의 타입은 언제든지 동적으로 변할 수 있다.
- 이러한 특징을 **동적 타이핑**이라고 한다.

처음의 질문으로 돌아가서 변수는 타입을 가질까?

기본적으로 변수는 타입을 가지지 않는다. 하지만 값은 타입을 갖는다.

따라서 **현재 변수에 할당되어 있는 값에 의해 변수의 타입이 동적으로 결정된다.**

## 6.10.2 동적 타입 언어와 변수

동적 타입 언어는 변수에 어떤 데이터 타입의 값이라도 자유롭게 할당할 수 있다.

하지만 모든 소프트웨어 아키텍처에는 **트레이드오프**가 존재한다.

### 단점

- 변수 값은 언제든지 변경될 수 있기 때문에 복잡한 프로그램에서는 변수 값을 추적하기 어려울 수 있다.
- 값을 확인하기 전에는 타입을 확신할 수 없다.
- 자바스크립트는 개발자의 의도와는 상관없이 엔진에 의해 암묵적으로 타입이 자동으로 변환되기도 한다.

즉, **유연성**은 높지만 **신뢰성**은 떨어진다.
