## 1. 스코프 체인
함수는 중첩될 수 있으므로, 지역 스코프도 중첩될 수 있다. <br>
=> 이는 스코프가 함수의 중첩에 의해 계층 구조를 갖는다는 걸 의미한다.

(사진)

위의 사진에서  `outer 함수` 의 지역과 `inner 함수` 의 지역이 있다.<br>
`inner함수` 는 `outer 함수`의 __중첩함수__ 이다.<br>

계층 구조로 설명을 하자면..?<br>
`outer 함수`가 만든 지역스코프는 `inner 함수`가 만든 지역 스코프의 상위 스코프이다.<br>
또한, `outer 함수`의 스코프의 상위 스코프는 전역 스코프이다.

(사진)

- 모든 스코프는 하나의 계층으로 연결
- 모든 지역 스코프의 최상위 스코프는 __전역 스코프__
=> 스코프가 계층적으로 연결괸 것 == 스코프 체인

변수를 참조할때 JS엔진은 __스코프 체인__ 을 통해 변수를 참조하는 코드에서 시작하여<br>
상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.<br>
즉, 이를 통해 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조할 수 있는 것임

### 1.1 스코프 체인에 의한 변수 검색

(사진)

해당 사진의 4/5/6을 보고 우리는 JS엔진이 스코프 체인을 통해 변수를 어떻게 찾아내는지 알 수 있다.

4. x 변수를 참조하는 코드의 스코프인 `inner 함수`의 지역 스코프에서 x 변수가 선언되었는지 검색
-> `inner 함수` 내에서는 선언된 x 변수가 존재하므로 해당 변수를 참조하고 종료
5. y 변수를 참조하는 코드의 스코프인 `inner 함수`의 지역 스코프에서 y변수가 선언되었는지 검색
-> 그러나, 해당 함수에는 선언된 y변수가 존재하지 않으므로 상위스코프인 `outer 함수`의 지역 스코프로 이동
-> 그러나, 해당 함수 내에서도 y변수가 존재하지 않으므로 상위 스코프인 전역 스코프로 이동
-> 전역 스코프에는 y 변수 선언이 존재하므로 해당 변수를 참조하고 종료

6번도 동일하게 진행..

이러한 과정은
- 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조 가능
- 하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수 없다.
<br>
#### 상속과 유사하다.

### 1.2. 스코프 체인에 의한 함수 검색
```
//전역함수
function foo(){
    console.log('global function foo);
}

function bar() {
//중첩함수
    function foo(){
        console.log('local function foo');
    }
    foo(); //1번
}
bar();
```
1에서 foo()를 호출하면 JS 엔진은 함수를 가리키는 식별자 foo를 검색
=> 이와 같이 함수도 식별자에 해당하기에 스코프를 갖는다.

## 2. 함수 레벨 스코프
var키워드로 선언된 변수는 오로지 함수의 코드블록(함수 몸체) 만을 지역 스코프로 인정한다.
=> 이런 특성을 __함수 레벨 스코프__ 라고 한다.

```
var x = 1;
if(true){
    //var 키워드로 선언된 변수는 함수의 코드 블록 만을 지역 스코프로 인정
    //함수 밖에서 var키워드로 선언된 변수는 코드 블록 내에 선언했다 할지라도 모두 전역 변수
    //따라서 x는 전역 변수
    var x = 10;
}
console.log(x); //10
```
var 키워드로 선언된 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정한다.

### 3. 렉시컬 스코프
```
var x = 1;
function foo(){
    var x = 10;
    bar();
}

function bar(){
    console.log(x)
}

foo(); // ?
bar(); // ?
```
해당 코드의 실행결과는 __bar 함수__ 의 상위 스코프가 무엇인지에 따라 결정된다.
- 함수를 __어디서 호출__ 했는지에 따라 함수의 상위 스코프 결정
- 함수를 __어디서 정의__ 했는지에 따라 함수의 상위 스코프 결정

1. 어디서 호출 했는지 <br>
에 따라 상위 스코프를 결정한다면 bar 함수의 상위스코프는 foo함수 / 전역 스코프

2. 어디서 정의했는지 <br>
에 따라 상위 스코프를 결정한다면 bar 함수의 상위 스코프는 전역 스코프

어디서 호출했는지에 따라 상위 스코프를 결정하는 것 === 동적 스코프<br>
_함수를 정의하는 시점에는 함수가 어디서 호출 되었는지 알 수 었기 때문에 이를 동적으로 상위 스코프를 결정해야하기 때문_

어디서 정의했는지에 따라 상위 스코프를 결정하는 것 === 렉시컬 스코프 or 정적 스코프<br>

JS는 렉시컬 스코프를 따르므로 __함수를 어디서 정의했는지__ 에 따라 상위 스코프를 결정한다.<br>
즉, 함수가 호출된 위치는 상위 스코프 결정에 영향을 끼치지 않는다.<br>
