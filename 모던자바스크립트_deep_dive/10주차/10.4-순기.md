# strict mode

## strict mode란?

아래 코드를 실행시키면 어떤 결과가 나올까?

```javascript
function foo() {
  x = 10;
}
foo();
console.log(x); // ?
```

- `foo`함수 내의 변수 x에 10을 할당했지만 x를 선언한적은 없기 때문에 에러가 발생할거라 생각할 수 있다.
- 하지만 자바스크립트 엔진은 암묵적으로 전역 객체에 x 프로퍼티를 동적으로 생성하기 때문에 x를 전역 변수처럼 사용할 수 있다.
- 따라서 결과는 10이 출력된다.
- 이러한 현상을 **암묵적 전역**이라 한다.
- 암묵적 전역은 개발자의 의도와 상관없이 오류를 발생시킬수 있어 반드시 var, let, const 키워드를 사용해 변수를 선언해야한다.
- 하지만 실수는 언제나 발생할 수 있기 때문에 이러한 실수를 개발 환경에서부터 방지하기 위한 해결책이 es5부터 추가된 **strict mode(엄격 모드)**이다.

## strict mode 적용

- 함수 가장 상단이나 전역 상단에 `'use strict';` 추가하면 된다.

## 전역에 strict mode를 적용하는 것은 피하자

- 외부 라이브러리가 non-strict 모드일수도 있고
  strict mode랑 non-strict mode를 구분해서 사용하는게 좋기 때문에 전역에 사용하지는 말자.

## 함수 단위로 strict mode를 적용하는 것도 피하자

- 함수마다 strict mode 적용이 달라지는것은 바람직하지 않다.
- 모든 함수에 일일이 strict mode를 추가하는것도 번거롭다.

## 그럼 언제 쓰라고

- strict mode는 즉시 실행 함수로 감싼 스크립트 단위로 적용하는 것이 바람직하다.

## strict mode 쓰면 달라지는거

### 일반 함수의 this

- strict mode에서 함수를 일반 함수로서 호출하면 this에 undefined가 바인딩된다.
- non-strict mode에서 함수를 일반 함수로서 호출하면 this는 전역 객체가 된다.

```javascript
(function () {
  "use strict";
  function foo() {
    console.log(this); // undefined
  }
  foo();
  function Foo() {
    console.log(this); // Foo
  }
  new Foo();
})();

(function () {
  function foo() {
    console.log(this);
    //     <ref *1> Object [global] {
    //   global: [Circular *1],
    //   queueMicrotask: [Function: queueMicrotask],
    //   clearImmediate: [Function: clearImmediate],
    //   setImmediate: [Function: setImmediate] {
    //     [Symbol(nodejs.util.promisify.custom)]: [Getter]
    //   },
    //   structuredClone: [Getter/Setter],
    //   clearInterval: [Function: clearInterval],
    //   clearTimeout: [Function: clearTimeout],
    //   setInterval: [Function: setInterval],
    //   setTimeout: [Function: setTimeout] {
    //     [Symbol(nodejs.util.promisify.custom)]: [Getter]
    //   },
    //   atob: [Getter/Setter],
    //   btoa: [Getter/Setter],
    //   performance: [Getter/Setter],
    //   fetch: [AsyncFunction: fetch]
  }

  foo();
  function Foo() {
    console.log(this); // Foo
  }
  new Foo();
})();
```

### arguments 객체

- strict mode에서는 매개변수에 전달된 인수를 재할당하여 변경해도 arguments 객체에 반영되지 않는다.

```javascript
(function (a) {
'use strict';
// 매개변수에 전달된 인수를 재할당하여 변경
a = 2;
// 변경된 인수가 arguments 객체에 반영되지 않는다
console.log(arguments); // { 0： 1, length: 1 }
}(1))；
```
