# 상속보다 합성을 사용하세요

객체지향 프로그래밍에서는 코드를 재사용하기 위해 `상속`이라는 개념을 많이 사용하게 됩니다.
<br />

예를 들어 같은 코드를 가진 두 개의 클래스가 있다고 가정해 봅시다.
<br />
이 두 클래스에 대한 부모 클래스를 만든 후 `상속`하여 자식 클래스로 만들면 쉽게 구현할 수 있습니다.
<br />
하지만 대부분의 경우는 `상속`보다는 `합성`을 이용하는 것이 좋은데, `합성`이 무엇이고 왜 사용해야 하는지 알아보겠습니다.

<br />

## 상속(Inheritance)과 합성(Composition)

개발을 할 때 가장 신경 써야 하는 것 중 하나가 **중복을 제거하여 변경을 쉽게 만드는 것**입니다.
<br />
객체지향 프로그래밍의 장점 중 하나는 코드를 재사용하여 중복을 제거하기에 용이하다는 것인데, 이를 위한 방법에는 크게 `상속`과 `합성` 두 가지가 있습니다.

### 상속이란

상속은 상위 클래스에 중복 로직을 구현해두고 이를 물려받아 코드를 재사용하는 방법입니다.
<br />
흔히 상속은 `Is-A` 관계라고 많이 불리며, 예를 들어 **개발자 클래스**와 **사람 클래스**가 있을 때 **개발자**는 **사람**이므로 이러한 관계를 `Is-A` 관계라고 합니다.
<br />

- `Is-A` 관계
- _개발자는 사람이다._ 여기서 **개발자**는 자식 클래스가 되고 **사람**은 부모 클래스가 됩니다.
- 부모 클래스 변경 시 자식 클래스에서 원치 않은 동작을 할 수 있습니다.<br />
  그렇기 때문에 상속은 `결합도가 높다고 말합니다.`

```typescript
class Person {
  public walk() {
    console.log("걷기!");
  }

  public talk() {
    console.log("말하기!");
  }
}

class Developer extends Person {
  public develop() {
    console.log("개발하기!");
  }
}

const developer = new Developer();

developer.walk(); // 걷기!
developer.talk(); // 말하기!
developer.develop(); // 개발하기!
```

#### ⚠️ 상속의 문제점

상속에는 코드 재사용이 용이하다는 큰 장점이 있지만 그에 다른 단점과 한계점이 있습니다.
<br />

- 유연성 및 확장성이 떨어짐
  - 자식 클래스는 상위 클래스의 인터페이스를 줄일 수 없다.
  - 메서드들을 오버라이드 할 때 코드의 호환을 확인해야 한다.
- 캡슐화가 깨지고 결합도가 높아짐
  - 자식 클래스들은 부모 클래스들과 밀접하게 결합한다.
  - 상속은 부모 클래스의 캡슐화를 깨뜨린다.
- 다중상속에 의한 문제가 발생할 수 있음
  - 상속을 통해 코드를 재사용하려고 하면 병렬 상속 계층구조들이 생성될 수 있다.
- `클래스 폭팔` 문제가 발생할 수 있음

<br />

### 합성이란

이러한 한계점을 극복하기 위해 `합성`이라는 대안이 있습니다.
<br />

- `Has-A` 관계
- _개발자는 맥북을 가지고 있다._ 개발자이라는 클래스에 맥북이라는 클래스의 인스턴스가 포함됩니다.
- 합성은 상속에 비해 **높은 유연성**과 **낮은 결합도**를 가집니다.<br />
  즉, 클래스 간 **의존성이 낮습니다.**

```typescript
class MacBook {
  public develop() {
    console.log("개발하기!");
  }
}

class Developer {
  public developable: Developable;

  constructor() {
    this.macBook = new MacBook();
  }
}

const developer = new Developer();
developer.macBook.develop(); // 개발하기!
```

> _𝐐. 그렇다면 무조건 상속을 사용하면 안 되는 걸까?_<br />
> 다음 경우를 만족한다면 상속을 사용해도 됩니다.
>
> - 부모와 자식 클래스가 Is-A 관계인 경우
> - 행동 호환성이 만족하는 경우

<br />

## 📝 결론

`상속`을 사용하면 손쉽게 코드를 재사용할 수 있습니다.
<br />
하지만 상속 관계가 추가될수록 시스템의 **결합도가 높아져** 변경이 점차 어려워지고, **캡슐화를 깨뜨리는 등의 문제**가 발생합니다.
<br />
특히 새로운 변수가 추가되는 경우에는 더욱 결합도에 의한 문제가 부각됩니다.
<br />
이러한 문제점들을 극복하기 위해 `합성`을 사용합시다.

### 정리

- 합성은 클래스에 다른 클래스의 인스턴스가 포함되어 있습니다.
- 모든 상속 관계는 합성 관계로 변환될 수 있습니다.
- 재사용 가능하며 클래스 간의 의존성이 낮습니다.
