# νΌμ‚¬λ“ ν¨ν„΄

> λ¨Όμ € `Facade(μ™Έκ΄€)`λ” "**κ±΄λ¬Όμ μ •λ©΄**"μ„ μλ―Έν•©λ‹λ‹¤.

> **π’΅`νΌμ‚¬λ“` ν¨ν„΄μ΄λ€?**
>
> λΌμ΄λΈλ¬λ¦¬, ν”„λ μ„μ›ν¬ λλ” λ‹¤λ¥Έ λ³µμ΅ν• μ§‘ν•©μ— λ€ν• <u>λ‹¨μν™”λ μΈν„°νμ΄μ¤</u>λ¥Ό μ κ³µν•λ” λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤.

## μμ‹

### μƒν™©

λΌμ΄λΈλ¬μ΄λ‚ ν”„λ μ„μ›ν¬μ— μ†ν•λ” κ΄‘λ²”μ„ν• κ°μ²΄λ“¤μ μ§‘ν•©μΌλ΅ κ°λ°μ„ ν•΄μ•Όν•λ” μƒν™©μ— μ–΄λ–¨κΉμ”?

### μ‹λ„

μΌλ°μ μΌλ΅, κ°μ²΄λ“¤μ„ λ¨λ‘ μ΄κΈ°ν™”ν•κ³ , μΆ…μ†μ„± κ΄€κ³„λ“¤μ„ μ¶”μ ν•κ³ , μ¬λ°”λ¥Έ μμ„λ΅ λ©”μ„λ“κ°€ μ‹¤ν–‰λκ² λ” ν•λ” λ“±μ μ‘μ—…μ„ μν–‰ν•΄μ•Όν•©λ‹λ‹¤.

### λ¬Έμ  λ°μƒ

μ΄λ ‡κ² λλ©΄ μ°λ¦¬μ ν΄λμ¤ λ‚΄ λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ νƒ€ ν΄λμ¤λ“¤μ κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­λ“¤κ³Ό κ²°ν•©λ„κ°€ λ†’μ•„μ Έμ„ μ μ§€λ³΄μκ°€ μ–΄λ ¤μ›μ§‘λ‹λ‹¤.

### ν•΄κ²°μ±…

μ΄λ° μƒν™©μ—μ„ `νΌμ‚¬λ“` ν¨ν„΄μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

- λ³µμ΅ν• ν•μ„ μ‹μ¤ν…μ— λ€ν• **κ°„λ‹¨ν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µ**ν•λ” ν΄λμ¤

- **μ ν•λ κΈ°λ¥μ„±**μ„ μ κ³µ

- μ¦‰, ν΄λΌμ΄μ–ΈνΈλ“¤μ΄ **μ¤‘μ”ν•κ² μƒκ°ν•λ” κΈ°λ¥**λ“¤λ§

- μ •κµν• λΌμ΄λΈλ¬λ¦¬μ™€ ν†µν•©ν•΄μ•Ό ν•μ§€λ§ κ·Ήν μΌλ¶€λ§μ„ ν•„μ”ν•  λ• νΈλ¦¬
  - λΉ„λ””μ¤ λ³€ν™ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” μƒν™©
  - μ°λ¦¬κ°€ ν•„μ”ν•κ±΄ `encode(filename, format)` λ‹¨μΌ λ©”μ„λ“κ°€ μλ” ν΄λμ¤ λΏμΌ λ•

## μ‹¤μ  μƒν™© μμ‹ π”

![](https://velog.velcdn.com/images/gazagaza/post/f7028243-926d-4996-826b-8f5d2ed1cd28/image.png)

μ „ν™”λ΅ μ£Όλ¬Έμ„ ν•κΈ° μ„ν•΄ λ§¤μ¥μ— μ „ν™”λ¥Ό κ±Έμ—μµλ‹λ‹¤.

μ΄λ• μ „ν™”λ¥Ό λ°›λ” `μƒλ‹΄μ›`μ΄ μƒμ μ **λ¨λ“  μ„λΉ„μ¤**μ™€ **λ¶€μ„**μ— λ€ν• μ°λ¦¬μ `νΌμ‚¬λ“`μ…λ‹λ‹¤.

λ°”λ΅ λ°°μ†΅ μ„λΉ„μ¤μ— λ€ν• κ°„λ‹¨ν• `μμ„± μΈν„°νμ΄μ¤`λ¥Ό μ κ³µν•©λ‹λ‹¤.

## κΈ°λ³Έ κµ¬μ΅° π“‚

![](https://velog.velcdn.com/images/gazagaza/post/1683c7cc-8842-430a-80d8-20526d3f1a48/image.png)

1. `νΌμ‚¬λ“(Facade)`

   - ν•μ„ μ‹μ¤ν… κΈ°λ¥λ“¤μ νΉμ • λ¶€λ¶„μ— νΈλ¦¬ν•κ² μ ‘κ·Ό κ°€λ¥
   - ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ— λ€ν•΄μ„ μ–΄λ–»κ² μ‘λ™ν•΄μ•Ό ν•λ”μ§€ μ•κ³  μμ

2. `μ¶”κ°€μ μΈ νΌμ‚¬λ“(Additional Facade)`

   - μ¶”κ°€μ μΈ νΌμ‚¬λ“λ¥Ό μƒμ„±ν•μ—¬, ν•λ‚μ νΌμ‚¬λ“λ¥Ό λ³µμ΅ν• κµ¬μ΅°λ΅ λ§λ“λ” κ²ƒμ„ λ°©μ§€
   - μ¶”κ°€ νΌμ‚¬λ“λ“¤μ€ ν΄λΌμ΄μ–ΈνΈλ“¤κ³Ό λ‹¤λ¥Έ νΌμ‚¬λ“λ“¤μ—μ„ λ¨λ‘ μ‚¬μ© κ°€λ¥

3. `ν•μ„ μ‹μ¤ν…(Subsystem class)`

   - λ‹¤μ–‘ν• κ°μ²΄λ“¤λ΅ κµ¬μ„±
   - μλ―Έ μλ” μ‘μ—…μ„ μν–‰ν•λ„λ΅ ν•κΈ° μ„ν•΄μ„λ” **μ„Έλ¶€μ μΈ κµ¬ν„ μ •λ³΄**λ¥Ό κΉμ΄ μκ² μ‚΄ν΄λ΄μ•Όν•¨.
   - μ¬λ°”λ¥Έ μμ„λ΅ κ°μ²΄ μ΄κΈ°ν™”, μ μ ν• λ°μ΄ν„° ν•μ‹ μ κ³µ
   - ν•μ„ μ‹μ¤ν…μ€ νΌμ‚¬λ“μ μ΅΄μ¬λ¥Ό μΈμ‹ν•μ§€ λ»ν•¨

4. `ν΄λΌμ΄μ–ΈνΈ(Client)`
   - ν•μ„ μ‹μ¤ν… κ°μ²΄λ“¤μ„ μ§μ ‘ μ‚¬μ©ν•λ” λ€μ‹  νΌμ‚¬λ“λ¥Ό μ‚¬μ©

## μ½”λ“ μμ  π“–

![](https://velog.velcdn.com/images/yongvelopeer/post/bd246648-2746-4639-bc3b-0db59dd0509d/image.png)

```typescript
// μ„λΈμ‹μ¤ν… ν΄λμ¤λ“¤
// (λΉ„λ””μ¤ λ³€ν™ ν”„λ μ„μ›ν¬ ν΄λμ¤μ μΌλ¶€)
class VideoFile {
  // ...
}

class OggCompressionCodec {
  // ...
}

class MPEG4CompressionCodec {
  // ...
}

class CodecFactory {
  // ...
}

class BitrateReader {
  // ...
}

class AudioMixer {
  // ...
}

// νΌμ‚¬λ“ ν΄λμ¤
// ν”„λ μ„μ›ν¬μ λ³µμ΅μ„±μ„ κ°„λ‹¨ν• μΈν„°νμ΄μ¤ λ’¤μ— μ¨κΈΈ μ μμ
// κΈ°λ¥μ„±κ³Ό λ‹¨μν•¨μ„ μƒνΈλ³΄μ™„
class VideoConverter {
  convert(filename, format) {
    const file = new VideoFile(filename);
    const sourceCodec = new CodecFactory().extract(file);
    let destinationCodec;
    if (format === 'mp4') {
      destinationCodec = new MPEG4CompressionCodec();
    } else {
      destinationCodec = new OggCompressionCodec();
    }
    const buffer = BitrateReader.read(filename, sourceCodec);
    let result;
    result = BitrateReader.convert(buffer, destinationCodec);
    result = new AudioMixer().fix(result);

    return new File(result); // νμΌλ΅ λ§λ“λ” μ–Έμ–΄ λ‚΄μ κ°μ²΄λΌκ³  μƒκ°ν•λ©΄ λ¨
  }
}

// ν΄λΌμ΄μ–ΈνΈ
const converter = new VideoConverter();
const mp4 = converter.convert('funny-cats-video.ogg', 'mp4');
mp4.save();
```

## μ¶”κ°€ μμ  π

### νΌμ‚¬λ“ ν¨ν„΄μ„ μ μ©ν•μ§€ μ•μ€ μ½”λ“

```typescript
class Rinsing {
  rinse() {
    console.log('do Rinsing');
  }
}

class Spinning {
  spin() {
    console.log('do Spinning');
  }
}

class Washing {
  wash() {
    console.log('do Washing');
  }
}

// Client μΈ΅
const washing = new Washing();
const rinsing = new Rinsing();
const spinning = new Spinning();

this.washing.wash();
this.rinsing.rinse();
this.spinning.spin();
```

`Client` μΈ΅μ— μ—¬λ¬ κ°μ²΄λ“¤μ— `λ§¤μ° κ²°ν•©`λμ–΄ μμµλ‹λ‹¤.

μ¦‰, μ„ μ½”λ“λ” κΈΈμ–΄μ§€λ©΄ κ°€λ…μ„±μ΄ μΆ‹μ§€ μ•μ„ λΏλ”λ¬ `μ μ§€λ³΄μ`μ„±λ„ λ–¨μ–΄μ§‘λ‹λ‹¤.

### νΌμ‚¬λ“ ν¨ν„΄ μ μ© μ½”λ“

```typescript
// νΌμ‚¬λ“ ν΄λμ¤
class WashingMachine {
  private washing: Washing;
  private rinsing: Rinsing;
  private spinning: Spinning;

  constructor() {
    this.washing = new Washing();
    this.rinsing = new Rinsing();
    this.spinning = new Spinning();
  }

  startWashing() {
    this.washing.wash();
    this.rinsing.rinse();
    this.spinning.spin();
  }
}

// Client μΈ΅
const washingMachine = new WashingMachine();
washingMachine.startWashing();
```

`Client` μΈ΅μ—μ„ `Facade(WashingMachine)`λ§μ„ νΈμ¶ν•μ—¬ `μ„Ένƒ`μ΄λΌλ” λ™μ‘μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

λ©”μ„λ“ μλ―Έ λν• λ…ν™•ν•΄μ§‘λ‹λ‹¤.

## κµ¬ν„ λ°©λ²• π“•

1. κΈ°μ΅΄ ν•μ„μ‹μ¤ν…μ΄ μ΄λ―Έ μ κ³µν•κ³  μλ” κ²ƒλ³΄λ‹¤ λ” `κ°„λ‹¨ν• μΈν„°νμ΄μ¤`λ¥Ό μ κ³µν•λ” κ²ƒμ΄ κ°€λ¥ν•μ§€ ν™•μΈ

2. μƒ `νΌμ‚¬λ“` ν΄λμ¤μ—μ„ μΈν„°νμ΄μ¤λ¥Ό μ„ μ–Έν•κ³  κµ¬ν„

   - `ν΄λΌμ΄μ–ΈνΈ` μ½”λ“μ νΈμ¶λ΅ μΈν•΄ `ν•μ„ μ‹μ¤ν…`μ μ μ ν• κ°μ²΄λ΅ μ‹¤ν–‰

3. `νΌμ‚¬λ“` ν¨ν„΄μ„ ν†µν•΄μ„λ§ `ν•μ„ μ‹μ¤ν…`κ³Ό ν†µμ‹  ν•λ„λ΅ ν•΄μ•Όν•¨

   - `ν•μ„ μ‹μ¤ν…`μ΄ μƒ λ²„μ „μΌλ΅ λ³€κ²½λλ©΄ `νΌμ‚¬λ“` μ½”λ“λ§ μμ •ν•λ©΄ λ¨

4. `νΌμ‚¬λ“`κ°€ λ„λ¬΄ μ»¤μ§€λ©΄ λ©”μ„λ“ μΌλ¶€λ¥Ό μƒλ΅μ΄ νΌμ‚¬λ“ ν΄λμ¤λ΅ μ¶”μ¶ν•λ” λ°©λ²•μ„ κ³ λ ¤

## μ–Έμ  μ μ©ν•λ©΄ μΆ‹μ„κΉ? π§

- λ³µμ΅ν• ν•μ„ μ‹μ¤ν…μ— λ€ν•΄ μ ν•μ μΌ μ μμΌλ‚ **κ°„λ‹¨ν• μΈν„°νμ΄μ¤**κ°€ ν•„μ”ν•  λ•

- ν•μ„ μ‹μ¤ν…μ„ κ³„μΈµλ“¤λ΅ κµ¬μ„±ν•λ ¤λ” κ²½μ°
  - ν•μ„ μ‹μ¤ν…μ κ° κ³„μΈµμ— λ€ν• μ§„μ…μ μ„ μ •μν•κΈ° μ„ν•΄μ„
  - μ„ μμ‹μ—μ„λ” λΉ„λ””μ¤, μ¤λ””μ¤ κ΄€λ ¨μ λ‘ κ³„μΈµμΌλ΅ λ‚λ”

## μ¥λ‹¨μ  π’«

### μ¥μ  π‘

- λ³µμ΅ν• ν•μ„ μ‹μ¤ν…μ—μ„ μ½”λ“λ¥Ό λ³„λ„λ΅ λ¶„λ¦¬ν•  μ μμµλ‹λ‹¤.

### λ‹¨μ  π‘

- νΌμ‚¬λ“ ν΄λμ¤κ°€ μ „μ²΄ μ‹μ¤ν…μ λ¨λ“  κΈ°λ¥μ„ λ‹΄λ‹Ήν•κ² λμ–΄ κ³Όλ„ν• μ±…μ„μ„ μ§€κ² λ  μ μμ
