# λΉ„μ§€ν„° ν¨ν„΄

> **λΉ„μ§€ν„°(λ°©λ¬Έμ) ν¨ν„΄μ΄λ€? π’΅**
>
> μ•κ³ λ¦¬μ¦λ“¤μ„ μ•κ³ λ¦¬μ¦μ΄ μ‘λ™ν•λ” κ°μ²΄λ“¤λ΅λ¶€ν„° λ¶„λ¦¬ν•  μ μλ„λ΅ ν•λ” ν–‰λ™ λ””μμΈ ν¨ν„΄

## μ‹¤μ  μƒν™© μμ‹

![](https://refactoring.guru/images/patterns/content/visitor/visitor-comic-1.png?id=7ee4fa8800f7c4df4e1aa3b1aca2b7f1)

> λ³΄ν— λ€λ¦¬μΈμ΄ λ‹¤μ–‘ν• μƒν™©μ—μ„ νΉμ • λ³΄ν— νλ§¤λ¥Ό ν•λ” μƒν™©

- μΌλ° μ§‘μ—λ” μλ£λ³΄ν—μ„ νλ§¤
- μ€ν–‰μ—λ” λ„λ‚ λ³΄ν—μ„ νλ§¤
- μ»¤ν”Όμμ—λ” ν™”μ¬ λ³΄ν— νλ§¤

---

> μ¦‰, μ‹¤μ  μ½”λ“μ—μ„ **κ°μ²΄μ κµ¬μ΅°**μ™€ κµ¬μ΅°μ—μ„ **μν–‰λλ” μ‘μ—…**μ„ λ¶„λ¦¬ν•μ—¬ κµ¬ν„

> κ°μ²΄μ ν™•μ¥μ„±κ³Ό μ μ—°μ„±μ„ λ†’μ΄λ” λ©μ 

## κµ¬μ΅°

![](https://refactoring.guru/images/patterns/diagrams/visitor/structure-ko.png?id=8445ad6187fdd0457c929bb4040458af)

1. `λΉ„μ§€ν„° μΈν„°νμ΄μ¤`

   - κ°μ²΄ κµ¬μ΅°μ κµ¬μƒ μ”μ†λ“¤μ„ μΈμλ“¤λ΅ μ‚¬μ©ν•  μ μλ” **λΉ„μ§€ν„° λ©”μ„λ“λ“¤μ μ§‘ν•©**μ„ μ„ μ–Έ

2. `κµ¬μƒ λΉ„μ§€ν„°`

   - λ‹¤μ–‘ν• κµ¬μƒ μ”μ† ν΄λμ¤λ“¤μ— λ§μ¶¤μΌλ΅ μ‘μ„±λ **κ°™μ€ ν–‰λ™λ“¤μ μ—¬λ¬ λ²„μ „**μ„ κµ¬ν„

3. `μ”μ† μΈν„°νμ΄μ¤`

   - λΉ„μ§€ν„°λ¥Ό `μλ½(accept)`ν•λ” λ©”μ„λ“λ¥Ό μ„ μ–Έ
   - ν•΄λ‹Ή λ©”μ„λ“μ—λ” **λΉ„μ§€ν„° μΈν„°νμ΄μ¤ μ ν•**μΌλ΅ μ„ μ–Έλ ν•λ‚μ **λ§¤κ°λ³€μκ°€ μ΅΄μ¬**ν•΄μ•Ό ν•¨

4. `κµ¬μƒ μ”μ†`

   - λ°λ“μ‹ `μλ½(accept)`ν•λ” λ©”μ„λ“λ¥Ό κµ¬ν„
   - ν•΄λ‹Ή λ©”μ„λ“μ λ©μ μ€ νΈμ¶μ„ ν„μ¬ μ”μ† ν΄λμ¤μ— ν•΄λ‹Ήν•λ” μ μ ν• λΉ„μ§€ν„° λ©”μ„λ“λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ ν•λ” κ²ƒ

5. `ν΄λΌμ΄μ–ΈνΈ`
   - μΌλ°μ μΌλ΅ μ»¬λ ‰μ… λλ” κΈ°νƒ€ λ³µμ΅ν• κ°μ²΄(μ: λ³µν•©μ²΄ νΈλ¦¬)λ¥Ό λ‚νƒ€λƒ„

## μ½”λ“ μμ‹

> ν•λ‚μ κ±°λ€ν• κ·Έλν”„λ΅ κµ¬μ„±λ μ§€λ¦¬ μ •λ³΄λ¥Ό μ‚¬μ©ν•΄ μ‘λ™ν•λ” μ•±μ„ κ°λ°ν•κ³  μλ‹¤κ³  κ°€μ •

> μ΄ κ·Έλν”„λ¥Ό XML ν•μ‹μΌλ΅ λ‚΄λ³΄λ‚΄λ” μ‘μ—…μ„ κµ¬ν„ν•΄μ•Όν•¨

```typescript
interface Visitor {
  doForCity(city: City): void;
  doForIndustry(industry: Industry): void;
  doForSightSeeing(sightSeeing: SightSeeing): void;
}

abstract class Node {
  abstract accept(visitor: Visitor): void;
}

class City extends Node {
  accept(visitor: Visitor) {
    visitor.doForCity(this);
  }
}

class Industry extends Node {
  accept(visitor: Visitor) {
    visitor.doForIndustry(this);
  }
}

class SightSeeing extends Node {
  accept(visitor: Visitor) {
    visitor.doForSightSeeing(this);
  }
}

class ExportVisitor implements Visitor {
  doForCity(city: City) {
    console.log(`Exporting City node to XML: ${city}`);
  }

  doForIndustry(industry: Industry) {
    console.log(`Exporting Industry node to XML: ${industry}`);
  }

  doForSightSeeing(sightSeeing: SightSeeing) {
    console.log(`Exporting SightSeeing node to XML: ${sightSeeing}`);
  }
}

const graph: Node[] = [];

graph.push(new City());
graph.push(new Industry());
graph.push(new SightSeeing());

const xmlExportVisitor = new ExportVisitor();

graph.forEach((node) => node.accept(xmlExportVisitor));
```

## κµ¬ν„ λ°©λ²•

1. κ° κµ¬μƒ μ”μ† ν΄λμ¤λ‹Ή ν•λ‚μ”© `λΉ„μ§€ν„°` λ©”μ„λ“λ¥Ό λ§λ“¤κ³  μ΄ λ©”μ„λ“μ μ§‘ν•©μΌλ΅ `λΉ„μ§€ν„° μΈν„°νμ΄μ¤`λ¥Ό μ„ μ–Έ

2. `μ”μ† μΈν„°νμ΄μ¤λ¥Ό μ„ μ–Έ`. μλ½(accept)λ©”μ„λ“ μ¶”κ°€ν•κ³  λΉ„μ§€ν„° κ°μ²΄λ¥Ό μΈμλ΅ λ°›μ•„λ“¤μ—¬μ•Ό ν•¨

3. λ¨λ“  `κµ¬μƒ μ”μ† ν΄λμ¤`μ—μ„ μλ½(accept)λ©”μ„λ“λ¥Ό κµ¬ν„

4. μ”μ† ν΄λμ¤λ“¤μ€ **λΉ„μ§€ν„° μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄μ„λ§ λΉ„μ§€ν„°μ™€ λ™μ‘**ν•΄μ•Όν•¨

5. ν΄λΌμ΄μ–ΈνΈλ” λΉ„μ§€ν„° κ°μ²΄λ¥Ό λ§λ“¤κ³  'μλ½' λ©”μ„λ“λ“¤μ„ ν†µν•΄ μ”μ†μ— μ „λ‹¬

## μ–Έμ  μ μ©ν•λ©΄ μΆ‹μ„κΉ? π§

- λ³µμ΅ν• κ°μ²΄ κµ¬μ΅°(μ: κ°μ²΄ νΈλ¦¬)μ λ¨λ“  μ”μ†μ— λ€ν•΄ μ‘μ—…μ„ μν–‰ν•΄μ•Ό ν•  λ•

- λ³΄μ΅° ν–‰λ™λ“¤μ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μ •λ¦¬(λ¶„λ¦¬) κ°€λ¥

- ν–‰λ™μ΄ ν΄λμ¤ κ³„μΈµκµ¬μ΅°μ μΌλ¶€ ν΄λμ¤λ“¤μ—μ„λ§ μλ―Έκ°€ μκ³ , λ‹¤λ¥Έ ν΄λμ¤λ“¤μ—μ„λ” μλ―Έκ°€ μ—†μ„ λ•

## μ¥λ‹¨μ  π’«

### μ¥μ  π‘

- κ°λ°©/νμ‡„ μ›μΉ™ μ μ©

- λ‹¨μΌ μ±…μ„ μ›μΉ™ μ μ©

- λΉ„μ§€ν„° κ°μ²΄λ” λ‹¤μ–‘ν• κ°μ²΄λ“¤κ³Ό μ‘μ—…ν•λ©΄μ„ μ μ©ν• μ •λ³΄λ¥Ό μ¶•μ ν•  μ μμ

### λ‹¨μ  π‘

- ν΄λμ¤κ°€ μ”μ† κ³„μΈµκµ¬μ΅°μ— μ¶”κ°€λκ±°λ‚ μ κ±°λ  λ•λ§λ‹¤ λ¨λ“  λΉ„μ§€ν„°λ¥Ό μ—…λ°μ΄νΈ ν•΄μ•Όν•¨

- λΉ„μ§€ν„°λ“¤μ€ ν•¨κ» μ‘μ—…ν•΄μ•Ό ν•λ” μ”μ†λ“¤μ λΉ„κ³µκ° ν•„λ“ λ° λ©”μ„λ“μ— μ ‘κ·Όν•κΈ° μ„ν• κ¶ν•μ΄ λ¶€μ΅±ν•  μ μμ
