## 템플릿메서드
템플릿 메서드(Template Method) 패턴은 __여러 클래스에서 공통으로 사용하는 메서드를 템플릿화 하여 상위 클래스에서 정의__ 하고, 하위 클래스마다 __세부 동작 사항을 다르게 구현__ 하는 행동 디자인 패턴이다.

<br>

즉, __변하지 않는 기능(템플릿)은 상위 클래스__ 에 만들어두고 __자주 변경되며 확장할 기능은 하위 클래스__ 에서 만들도록 하여, 

상위의 메소드 실행 동작 순서는 고정하면서 세부 실행 내용은 다양화 될 수 있는 경우에 사용된다.

=> 템플릿 메소드 패턴은 __상속__ 이라는 기술을 극대화하여, __알고리즘의 뼈대__ 를 맞추는 것에 초점을 둔다.

### 🤨 문제
IF.....<br>
회사 __문서들을 분석__ 하는 데이터 마이닝 앱을 만들고 있다고 가정<br>
1. 사용자들은 앱에 다양한 형식(PDF, DOC, CSV)의 문서들을 업로드
2. 앱은 이러한 문서들에서 일관된 형식으로 의미 있는 데이터를 추출
3. 앱의 첫 번째 버전은 DOC 파일과만 작동 -> 다음버전에는 CSV 파일 지원 -> 한달 후 우리는 앱이 PDF 파일에서 데이터를 추출할 수 있도록 __'가르칠 예정'__

<img width="439" alt="image" src="https://github.com/spaaaams/boook/assets/51051548/6285ea14-a69e-4eae-b58f-d0e3ca0c5dcd">


__🕰️ 시간이 지나고..__ <br>
PDF / DOC / CSV 세가지 클래스에 __유사한 코드__ 가 많다는 것을 파악
<br>
내부적으로 데이터 형식을 처리하는 코드는 다르지만 데이터 처리 및 분석을 위한 코드는 대부분 동일.
<br>
이런 경우 동일한 코드를 유지하는 것보다
- 알고리즘 구조는 그대로 두되?
- 중복되는 코드는 제거<br>
하는 방법이 베스트일 것입니다.

⛔️ 그러나, 이 클래스를 사용하는 클라이언트 코드와 관련된 다른 문제가 있습니다. <br>
해당 작업을 수행하는 코드에는 작업을 처리하고 있는 클래스에 따라 조건문이 많이있습니다.<br>
세 처리 클래스에 전부 공통되는 인터페이스 / 기초 클래스가 있다면?<br>
클라이언트 코드에서 조건문을 제거하고, 처리 객체에 메서드를 호출할 때 다형성을 사용할 수 있습니다.

### ♻️ 해결책
템플릿 메서드 패턴의 제안
- 알고리즘을 일련의 단계로 나눔
- 단계를 메서드로 변환
- 단일 템플릿 메서드 내부에 일련의 호출들을 넣으라고 제안

---
이러한 단계는 abstract 이거나, 일부 default 구현을 가질 것입니다.<br> 

__알고리즘을 사용하기 위해서는..?__ <br>
- 클라이언트의 자식 클래스 제공
- 모든 추상화 단계 구현
- (필요시) 선택적 단계중 일부를 오버라이드해야합니다.

__😯 앞서 말핸던 예시(데이터 마이닝 앱)에서 어떻게 작동하는지__
<br>
세 가지 파싱 알고리즘을 모두를 위한 기초 클래스를 만들 수 있습니다.<br>
이 기초 클래스는 다양한 문서 처리 단계들에 대한 일련의 호출들로 구성된 템플릿 메서드를 정의합니다.
<img width="422" alt="image" src="https://github.com/spaaaams/boook/assets/51051548/29581fa9-501f-49e9-b4d1-e55bb959dadc">

__😯 중복 코드를 제거하기 위해서__ <br>
 파일 열기/닫기 및 데이터 추출/파싱을 위한 코드는 데이터 형식들에 따라 다르므로 해당 메서드들을 건드릴 의미가 없습니다.<br>

 그러나 __미가공 데이터 분석 및 보고서 작성__ 과 같은 구현은 매우 유사하므로 기초 클래스로 끌어올릴 수 있습니다. 그러면 자식 클래스들은 기초 클래스에서 이 코드를 공유할 수 있습니다.
 <br>

두 가지 유형의 단계들로 구성 <br>
- 모든 자식 클래스는 추상 단계들을 구현해야 함.
- 선택적 단계들에는 이미 어떤 디폴트(기본값) 구현이 있지만, 필요한 경우 이를 무시하고 오버라이드(재정의) 할 수 있음.
<br>

뿐만아니라 __훅__ 이라는 단계가 존재<br>
_또 다른 유형의 단계 이자 몸체가 비어있는 선택적 단계_
<br>

템플릿 메서드는 훅이 오버라이드 되지 않아도 작동합니다.<br>
일반적으로 훅들은 알고리즘의 __중요한 단계들의 전 또는 후에 배치__ 되어 자식 클래스들에 알고리즘에 대한 추가 확장 지점들을 제공합니다.

### 🗼 구조
![image](https://github.com/spaaaams/boook/assets/51051548/29aada3c-6535-4183-8a76-11c7b8b4308c)

- __AbstractClass(추상 클래스)__ : 템플릿 메소드를 구현하고, 템플릿 메소드에서 돌아가는 추상 메소드를 선언한다. 이 추상 메소드는 하위 클래스인 ConcreteClass 역할에 의해 구현된다. <br>
- __ConcreteClass(구현 클래스)__ : AbstractClass를 상속하고 추상 메소드를 구체적으로 구현한다. ConcreteClass에서 구현한 메소드는 AbstractClass의 템플릿 메소드에서 호출된다.

### hook메서드
![image](https://github.com/spaaaams/boook/assets/51051548/9ae6a27c-8c96-48b6-a306-14511ad37f8c)

훅(hook) 메소드는 __부모의 템플릿 메서드의 영향이나 순서를 제어__ 하고 싶을때 사용되는 메서드 형태를 말한다.<br>
위의 그림에서 보듯이 템플릿 메서드 내에 실행되는 동작을 step2() 이라는 메서드의 참, 거짓 유무에 따라 다음 스텝을 어떻게 이어나갈지 지정한다.<br>
이를 통해 자식 클래스에서 좀더 유연하게 템플릿 메서드의 알고리즘 로직을 다양화 할 수 있다는 특징이 있다.
<br>

훅 메소드는 추상 메소드가 아닌 __일반 메소드__ 로 구현하는데<br>
-> 이유: 선택적으로 오버라이드 하여 자식 클래스에서 제어하거나 내버려두기 위함
<br>

### ✨ 언제 사용해?
- 클라이언트가 __알고리즘의 특정 단계만 확장__ 하고, 전체 알고리즘이나 해당 구조는 확장하지 않도록 할때
- 동일한 기능은 상위 클래스에서 정의하면서 확장, 변화가 필요한 부분만 __하위 클래스에서 구현__ 할 때

### 👍👎장단점
#### 👍 장점
- 클라이언트가 대규모 알고리즘의 특정 부분만 재정의하도록 하여, 알고리즘의 다른 부분에 발생하는 변경 사항의 영향을 덜 받도록 한다.
- 상위 추상클래스로 로직을 공통화 하여 코드의 중복을 줄일 수 있다.🔻
- 서브 클래스의 역할을 줄이고, 핵심 로직을 상위 클래스에서 관리하므로서 관리가 용이해진다

#### 👎 단점
- 알고리즘의 제공된 골격에 의해 __유연성이 제한__ 될 수 있다.
- 알고리즘 구조가 복잡할수록 __템플릿 로직 형태를 유지하기 어려워__ 진다.
- 추상 메소드가 많아지면서 클래스의 생성, 관리가 어려워질 수 있다.
- 상위 클래스에서 선언된 추상 메소드를 하위 클래스에서 구현할 때, 그 메소드가 어느 타이밍에서 호출되는지 클래스 로직을 이해해야 할 필요가 있다.
- 로직에 변화가 생겨 상위 클래스를 수정할 때, 모든 __서브 클래스의 수정이 필요 할수도__ 있다.

### React에서 사용되는 템블릿 메소드 예제
- 고차 컴포넌트 (HOC)
- 커스텀 훅
